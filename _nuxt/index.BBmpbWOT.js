import Y from"./inputswitch.esm.2DSdmvb_.js";import{n as D,o as i,q as k,u as n,s as Z,r as b,F as C,v as ee,x as te,y as le,c as a,a as t,b as r,t as v,z as A,w as g,d as M,A as ne,B as f,C as p,D as se,E as ie,G as oe}from"./entry.4Unyay7u.js";import ae from"./inputtext.esm.Cas7flK0.js";import L from"./Icon.BR6yDETt.js";import ue from"./column.esm.evqoJ6LG.js";import de from"./multiselect.esm.-2dYknnM.js";import re from"./inputnumber.esm.DaWaAe6z.js";import ce from"./datatable.esm.VDi5M57I.js";import me from"./divider.esm.BsCr1aZr.js";import fe from"./checkbox.esm.C9JT5cPy.js";import"./index.CzCfPO9Z.js";import"./index.esm.B3YGvAqS.js";import"./index.esm.qXe7Q6xD.js";import"./overlayeventbus.esm.Ds7yNtqp.js";import"./virtualscroller.esm.kRXH6fiy.js";import"./index.esm.DIVDQqZT.js";import"./index.esm.CCOw3UuZ.js";import"./paginator.esm.FqoyFPhm.js";import"./index.esm.qLGU1J3t.js";import"./dropdown.esm.DvGB-d5z.js";import"./index.esm.0QfZcQAr.js";import"./index.esm.slhtGaDM.js";import"./index.esm.BvLVniCj.js";import"./radiobutton.esm.BF_L1Jgn.js";import"./index.esm.C-G72wrG.js";import"./index.esm.BUOu6Nw6.js";const pe={__name:"BlessingIcon",setup(j){const m=D(L,{name:"fluent-emoji-flat:bell",size:"14"});return(w,s)=>(i(),k(n(m)))}},_e={__name:"CurseIcon",setup(j){const m=D(L,{name:"ph:skull-duotone",size:"15",color:"#a605e2"});return(w,s)=>(i(),k(n(m)))}},he=t("ul",null,[t("li",null,[M("各列のフィルタ("),t("i",{class:"pi pi-filter"}),M(")よりアイテムを絞り込むことができます")]),t("li",null,"ゲーム内で命名済みもしくは識別済みのアイテムについて「識別済み除外設定」より除外することができます"),t("li",null,"祝福や呪いについて考慮した表示を行うこともできます")],-1),ve={class:"flex align-content-start flex-wrap"},ge={class:"flex align-items-center justify-content-center m-2"},be=t("label",{class:"font-bold w-20rem"},"初期状態で識別済みのアイテムを含める",-1),ye={class:"flex align-items-center justify-content-center m-2"},Ve=t("label",{class:"font-bold w-8rem"},"祝福を含める",-1),Ie={class:"flex align-items-center justify-content-center m-2"},we=t("label",{class:"font-bold w-8rem"},"呪われを含める",-1),xe={class:"flex align-items-center justify-content-center m-2"},Ce={class:"flex align-items-center justify-content-center m-2"},ke={key:0,class:"ml-2"},Ue=t("p",null,"命名済み、識別済みのアイテムについてこのダイアログでチェックを入れることでデータテーブルの表示対象から外せます",-1),Me=t("h3",null,"腕輪",-1),je={class:"flex justify-content-start align-content-start flex-wrap"},$e={class:"flex align-items-start justify-content-center"},Pe={class:"w-11rem"},Be=["for"],Se=t("h3",null,"食料",-1),Fe={class:"flex justify-content-start align-content-start flex-wrap"},Ee={class:"flex align-items-start justify-content-center"},Ne={class:"w-11rem"},ze=["for"],Ae=t("h3",null,"草",-1),De={class:"flex justify-content-start align-content-start flex-wrap"},Le={class:"flex align-items-start justify-content-center"},Te={class:"w-11rem"},Ge=["for"],Qe=t("h3",null,"巻物",-1),qe={class:"flex justify-content-start align-content-start flex-wrap"},He={class:"flex align-items-start justify-content-center"},Oe={class:"w-11rem"},Re=["for"],Je=t("h3",null,"杖",-1),Ke={class:"flex justify-content-start align-content-start flex-wrap"},We={class:"flex align-items-start justify-content-center"},Xe={class:"w-11rem"},Ye=["for"],Ze=t("h3",null,"お香",-1),et={class:"flex justify-content-start align-content-start flex-wrap"},tt={class:"flex align-items-start justify-content-center"},lt={class:"w-11rem"},nt=["for"],st=t("h3",null,"壺",-1),it={class:"flex justify-content-start align-content-start flex-wrap"},ot={class:"flex align-items-start justify-content-center"},at={class:"w-11rem"},ut=["for"],dt={class:"flex justify-content-center"},Nt=Z({__name:"index",setup(j){const{$consts:m}=se(),w=b({name:{value:null,matchMode:C.CONTAINS},category:{value:null,matchMode:C.IN},buyPrice:{value:null,matchMode:C.EQUALS},sellPrice:{value:null,matchMode:C.EQUALS}}),s=ee({includeInitIdentifiedItems:!0,includeBlessing:!0,includeCurse:!0,identifiedItems:[],showIdentifiedItemsEditModal:!1}),$=b(),P=b(),B=b(),S=b(),F=b(),E=b(),N=b();te(()=>{$.value=y(m.bangleItems),P.value=y(m.foodItems),B.value=y(m.grassItems),S.value=y(m.scrollItems),F.value=y(m.stickItems),E.value=y(m.incenseItems),N.value=y(m.potItems)});const T=le(()=>{const d=[];for(const e of m.items)if(!(!s.includeInitIdentifiedItems&&e.initIdentified)&&!s.identifiedItems.includes(e.name))switch(e.category){case"腕輪":d.push(e),s.includeCurse&&d.push(U(e));break;case"食料":case"草":case"巻物":d.push(e),s.includeBlessing&&m.blessingCategories.includes(e.category)&&d.push(Q(e)),s.includeCurse&&d.push(U(e));break;case"杖":case"お香":case"壺":for(const h of e.useCounts){const I=G(e,h);d.push(I),s.includeCurse&&d.push(U(I))}break}return d}),G=(d,e)=>({...d,name:`${d.name} [${e}]`,buyPrice:d.buyPrice+e*100,sellPrice:d.sellPrice+e*40}),Q=d=>({...d,blessing:!0,buyPrice:d.buyPrice*2,sellPrice:d.sellPrice*2}),U=d=>({...d,curse:!0,buyPrice:Math.floor(d.buyPrice*.87),sellPrice:Math.floor(d.sellPrice*.87)}),q=d=>{s.identifiedItems.push(d.name.replace(/\s+\[.*?\]$/,""))},y=d=>{const e=[];for(let h=0;h<d.length;h+=13)e.push(d.slice(h,h+13));return e};return(d,e)=>{const h=Y,I=ie,H=ae,O=pe,R=_e,x=ue,J=de,z=re,K=ce,W=me,V=fe,X=oe;return i(),a(f,null,[t("div",null,[he,t("div",ve,[t("div",ge,[be,r(h,{modelValue:n(s).includeInitIdentifiedItems,"onUpdate:modelValue":e[0]||(e[0]=l=>n(s).includeInitIdentifiedItems=l)},null,8,["modelValue"])]),t("div",ye,[Ve,r(h,{modelValue:n(s).includeBlessing,"onUpdate:modelValue":e[1]||(e[1]=l=>n(s).includeBlessing=l)},null,8,["modelValue"])]),t("div",Ie,[we,r(h,{modelValue:n(s).includeCurse,"onUpdate:modelValue":e[2]||(e[2]=l=>n(s).includeCurse=l)},null,8,["modelValue"])]),t("div",xe,[r(I,{label:"識別済み除外設定",onClick:e[3]||(e[3]=l=>n(s).showIdentifiedItemsEditModal=!0)})]),t("div",Ce,[t("span",null,v(n(m).items.length)+" アイテム登録済み",1),n(s).identifiedItems.length>0?(i(),a("span",ke,v(n(s).identifiedItems.length)+" アイテムを識別済みとして除外中",1)):A("",!0)])]),r(K,{filters:n(w),"onUpdate:filters":e[4]||(e[4]=l=>ne(w)?w.value=l:null),filterDisplay:"row",showGridlines:"",sortMode:"multiple",value:n(T),paginator:"",rows:20,size:"small",scrollable:"",scrollHeight:"70vh"},{default:g(()=>[r(x,{field:"name",sortable:"",header:"アイテム名",filterField:"name",showFilterMenu:!1,filterMenuStyle:{width:"18rem"}},{filter:g(({filterModel:l,filterCallback:u})=>[r(H,{modelValue:l.value,"onUpdate:modelValue":o=>l.value=o,onChange:o=>u()},null,8,["modelValue","onUpdate:modelValue","onChange"])]),body:g(l=>[M(v(l.data.name)+" ",1),l.data.blessing?(i(),k(O,{key:0})):l.data.curse?(i(),k(R,{key:1})):A("",!0)]),_:1}),r(x,{field:"category",sortable:"",header:"カテゴリ",filterField:"category",showFilterMenu:!1,filterMenuStyle:{width:"18rem"}},{filter:g(({filterModel:l,filterCallback:u})=>[r(J,{modelValue:l.value,"onUpdate:modelValue":o=>l.value=o,options:n(m).categories,optionLabel:"name",optionValue:"name",selectedItemsLabel:"{0} カテゴリ選択中",maxSelectedLabels:3,onChange:o=>u()},null,8,["modelValue","onUpdate:modelValue","options","onChange"])]),_:1}),r(x,{field:"buyPrice",sortable:"",header:"買値",filterField:"buyPrice",dataType:"numeric",showFilterMenu:!1,filterMenuStyle:{width:"18rem"}},{filter:g(({filterModel:l,filterCallback:u})=>[r(z,{modelValue:l.value,"onUpdate:modelValue":[o=>l.value=o,u],min:0,max:99999,step:1},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),r(x,{field:"sellPrice",sortable:"",header:"売値",filterField:"sellPrice",showFilterMenu:!1,filterMenuStyle:{width:"18rem"}},{filter:g(({filterModel:l,filterCallback:u})=>[r(z,{modelValue:l.value,"onUpdate:modelValue":[o=>l.value=o,u],min:0,max:99999,step:1},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),r(x,{header:""},{body:g(l=>[r(I,{label:"識別済みに追加",type:"button",icon:"pi pi-plus",size:"small",onClick:u=>q(l.data)},null,8,["onClick"])]),_:1})]),_:1},8,["filters","value"])]),r(X,{visible:n(s).showIdentifiedItemsEditModal,"onUpdate:visible":e[13]||(e[13]=l=>n(s).showIdentifiedItemsEditModal=l),header:"識別済み除外設定",breakpoints:{"960px":"75vw"},style:{width:"30vw"},modal:!0},{footer:g(()=>[t("div",dt,[r(I,{label:"閉じる",icon:"pi pi-times",size:"small",style:{margin:"0 0.2em"},onClick:e[12]||(e[12]=l=>n(s).showIdentifiedItemsEditModal=!1)})])]),default:g(()=>[Ue,r(W),Me,t("div",je,[(i(!0),a(f,null,p(n($),(l,u)=>(i(),a("div",$e,[t("div",Pe,[(i(!0),a(f,null,p(l,(o,c)=>(i(),a("div",null,[r(V,{modelValue:n(s).identifiedItems,"onUpdate:modelValue":e[5]||(e[5]=_=>n(s).identifiedItems=_),"input-id":"bangle"+u+c,value:o.name},null,8,["modelValue","input-id","value"]),t("label",{for:"bangle"+u+c,class:"ml-2"},v(o.name),9,Be)]))),256))])]))),256))]),Se,t("div",Fe,[(i(!0),a(f,null,p(n(P),(l,u)=>(i(),a("div",Ee,[t("div",Ne,[(i(!0),a(f,null,p(l,(o,c)=>(i(),a("div",null,[r(V,{modelValue:n(s).identifiedItems,"onUpdate:modelValue":e[6]||(e[6]=_=>n(s).identifiedItems=_),"input-id":"food"+u+c,value:o.name},null,8,["modelValue","input-id","value"]),t("label",{for:"food"+u+c,class:"ml-2"},v(o.name),9,ze)]))),256))])]))),256))]),Ae,t("div",De,[(i(!0),a(f,null,p(n(B),(l,u)=>(i(),a("div",Le,[t("div",Te,[(i(!0),a(f,null,p(l,(o,c)=>(i(),a("div",null,[r(V,{modelValue:n(s).identifiedItems,"onUpdate:modelValue":e[7]||(e[7]=_=>n(s).identifiedItems=_),"input-id":"grass"+u+c,value:o.name},null,8,["modelValue","input-id","value"]),t("label",{for:"grass"+u+c,class:"ml-2"},v(o.name),9,Ge)]))),256))])]))),256))]),Qe,t("div",qe,[(i(!0),a(f,null,p(n(S),(l,u)=>(i(),a("div",He,[t("div",Oe,[(i(!0),a(f,null,p(l,(o,c)=>(i(),a("div",null,[r(V,{modelValue:n(s).identifiedItems,"onUpdate:modelValue":e[8]||(e[8]=_=>n(s).identifiedItems=_),"input-id":"scroll"+u+c,value:o.name},null,8,["modelValue","input-id","value"]),t("label",{for:"scroll"+u+c,class:"ml-2"},v(o.name),9,Re)]))),256))])]))),256))]),Je,t("div",Ke,[(i(!0),a(f,null,p(n(F),(l,u)=>(i(),a("div",We,[t("div",Xe,[(i(!0),a(f,null,p(l,(o,c)=>(i(),a("div",null,[r(V,{modelValue:n(s).identifiedItems,"onUpdate:modelValue":e[9]||(e[9]=_=>n(s).identifiedItems=_),"input-id":"stick"+u+c,value:o.name},null,8,["modelValue","input-id","value"]),t("label",{for:"stick"+u+c,class:"ml-2"},v(o.name),9,Ye)]))),256))])]))),256))]),Ze,t("div",et,[(i(!0),a(f,null,p(n(E),(l,u)=>(i(),a("div",tt,[t("div",lt,[(i(!0),a(f,null,p(l,(o,c)=>(i(),a("div",null,[r(V,{modelValue:n(s).identifiedItems,"onUpdate:modelValue":e[10]||(e[10]=_=>n(s).identifiedItems=_),"input-id":"incense"+u+c,value:o.name},null,8,["modelValue","input-id","value"]),t("label",{for:"incense"+u+c,class:"ml-2"},v(o.name),9,nt)]))),256))])]))),256))]),st,t("div",it,[(i(!0),a(f,null,p(n(N),(l,u)=>(i(),a("div",ot,[t("div",at,[(i(!0),a(f,null,p(l,(o,c)=>(i(),a("div",null,[r(V,{modelValue:n(s).identifiedItems,"onUpdate:modelValue":e[11]||(e[11]=_=>n(s).identifiedItems=_),"input-id":"pot"+u+c,value:o.name},null,8,["modelValue","input-id","value"]),t("label",{for:"pot"+u+c,class:"ml-2"},v(o.name),9,ut)]))),256))])]))),256))])]),_:1},8,["visible"])],64)}}});export{Nt as default};
