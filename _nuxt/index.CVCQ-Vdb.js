import O from"./inputswitch.esm.BH68h7sB.js";import{n as R,r as y,q as H,s as J,u as K,o as a,c as u,a as t,b as i,v as n,t as g,w as m,x as W,F as p,y as _,d as E,z as X,A as C,B as Y,C as Z}from"./entry.f7qABVR7.js";import ee from"./inputtext.esm.SbIuhQ0D.js";import te from"./column.esm.BGogEY6s.js";import le from"./multiselect.esm.BVXO83uJ.js";import se from"./inputnumber.esm.OYFfvIid.js";import ne from"./datatable.esm.CFFE9KXT.js";import ie from"./divider.esm.IrBir0Eg.js";import oe from"./checkbox.esm.C3E56AGs.js";import"./index.esm.DMBI8dFN.js";import"./index.esm.hwJzkIrm.js";import"./overlayeventbus.esm.BZ1mdFRl.js";import"./virtualscroller.esm.Cow48zDT.js";import"./index.esm.BC-J7Tj3.js";import"./index.esm.DR3-o9qF.js";import"./paginator.esm.EO5vMvwf.js";import"./index.esm.LRF_jxHu.js";import"./dropdown.esm.B1HwEwAG.js";import"./index.esm.CkDBTYyy.js";import"./index.esm.BF5KM6sq.js";import"./index.esm.DkuwPs9S.js";import"./radiobutton.esm.DQii7mcS.js";import"./index.esm.BjPKlc9o.js";import"./index.esm.BMIXbWHt.js";const ae=t("ul",null,[t("li",null,[E("各列のフィルタ("),t("i",{class:"pi pi-filter"}),E(")よりアイテムを絞り込むことができます")]),t("li",null,"ゲーム内で命名済みもしくは識別済みのアイテムについて「識別済み除外設定」より除外することができます"),t("li",null,"祝福や呪いについて考慮した表示を行うこともできます")],-1),ue={class:"flex align-content-start flex-wrap"},ce={class:"flex align-items-center justify-content-center m-2"},de=t("label",{class:"font-bold w-20rem"},"初期状態で識別済みのアイテムを含める",-1),re={class:"flex align-items-center justify-content-center m-2"},me=t("label",{class:"font-bold w-8rem"},"祝福を含める",-1),pe={class:"flex align-items-center justify-content-center m-2"},fe=t("label",{class:"font-bold w-8rem"},"呪われを含める",-1),_e={class:"flex align-items-center justify-content-center m-2"},he={class:"flex align-items-center justify-content-center m-2"},ve=t("div",{class:"mb-3 font-bold"}," アイテム名 ",-1),be=t("div",{class:"mb-3 font-bold"}," カテゴリ ",-1),ye=t("div",{class:"mb-3 font-bold"}," 買値 ",-1),ge=t("div",{class:"mb-3 font-bold"}," 売値 ",-1),Ve=t("p",null,"命名済み、識別済みのアイテムについてこのダイアログでチェックを入れることでデータテーブルの表示対象から外せます",-1),ke=t("h3",null,"腕輪",-1),Ie={class:"flex justify-content-start align-content-start flex-wrap"},Ce={class:"flex align-items-start justify-content-center"},we={class:"w-11rem"},xe=["for"],Pe=t("h3",null,"食料",-1),$e={class:"flex justify-content-start align-content-start flex-wrap"},Me={class:"flex align-items-start justify-content-center"},Ue={class:"w-11rem"},je=["for"],Fe=t("h3",null,"草",-1),Se={class:"flex justify-content-start align-content-start flex-wrap"},ze={class:"flex align-items-start justify-content-center"},Be={class:"w-11rem"},Ee=["for"],Ne=t("h3",null,"巻物",-1),Ae={class:"flex justify-content-start align-content-start flex-wrap"},De={class:"flex align-items-start justify-content-center"},Le={class:"w-11rem"},Te=["for"],Ge=t("h3",null,"杖",-1),Qe={class:"flex justify-content-start align-content-start flex-wrap"},qe={class:"flex align-items-start justify-content-center"},Oe={class:"w-11rem"},Re=["for"],He=t("h3",null,"お香",-1),Je={class:"flex justify-content-start align-content-start flex-wrap"},Ke={class:"flex align-items-start justify-content-center"},We={class:"w-11rem"},Xe=["for"],Ye=t("h3",null,"壺",-1),Ze={class:"flex justify-content-start align-content-start flex-wrap"},et={class:"flex align-items-start justify-content-center"},tt={class:"w-11rem"},lt=["for"],st={class:"flex justify-content-center"},Mt=R({__name:"index",setup(nt){const{$consts:v}=X(),w=y({name:{value:null,matchMode:C.CONTAINS},category:{value:null,matchMode:C.IN},buyPrice:{value:null,matchMode:C.EQUALS},sellPrice:{value:null,matchMode:C.EQUALS}}),o=H({includeInitIdentifiedItems:!1,includeBlessing:!1,includeCurse:!1,showIdentifiedItemsEditModal:!1,identifiedItems:[]}),x=y(),P=y(),$=y(),M=y(),U=y(),j=y(),F=y();J(()=>{x.value=V(v.bangleItems),P.value=V(v.foodItems),$.value=V(v.grassItems),M.value=V(v.scrollItems),U.value=V(v.stickItems),j.value=V(v.incenseItems),F.value=V(v.potItems)});const S=K(()=>{const c=[];for(const l of v.items)if(!(!o.includeInitIdentifiedItems&&l.initIdentified)&&!o.identifiedItems.includes(l.name))switch(l.category){case"腕輪":case"食料":case"草":case"巻物":c.push(l),o.includeBlessing&&v.blessingCategories.includes(l.category)&&c.push(A(l)),o.includeCurse&&c.push(z(l));break;case"杖":case"お香":case"壺":for(const b of l.useCounts){const f=N(l,b);c.push(f),o.includeCurse&&c.push(z(f))}break}return c}),N=(c,l)=>({...c,name:`${c.name} [${l}]`,buyPrice:c.buyPrice+l*100,sellPrice:c.sellPrice+l*40}),A=c=>({...c,name:`${c.name} [祝]`,buyPrice:c.buyPrice*2,sellPrice:c.sellPrice*2}),z=c=>({...c,name:`${c.name} [呪]`,buyPrice:Math.floor(c.buyPrice*.87),sellPrice:Math.floor(c.sellPrice*.87)}),D=c=>{o.identifiedItems.push(c.name.replace(/\s+\[.*?\]$/,""))},V=c=>{const l=[];for(let b=0;b<c.length;b+=13)l.push(c.slice(b,b+13));return l};return(c,l)=>{const b=O,f=Y,L=ee,I=te,T=le,B=se,G=ne,Q=ie,k=oe,q=Z;return a(),u(p,null,[t("div",null,[ae,t("div",ue,[t("div",ce,[de,i(b,{modelValue:n(o).includeInitIdentifiedItems,"onUpdate:modelValue":l[0]||(l[0]=e=>n(o).includeInitIdentifiedItems=e)},null,8,["modelValue"])]),t("div",re,[me,i(b,{modelValue:n(o).includeBlessing,"onUpdate:modelValue":l[1]||(l[1]=e=>n(o).includeBlessing=e)},null,8,["modelValue"])]),t("div",pe,[fe,i(b,{modelValue:n(o).includeCurse,"onUpdate:modelValue":l[2]||(l[2]=e=>n(o).includeCurse=e)},null,8,["modelValue"])]),t("div",_e,[i(f,{label:"識別済み除外設定",onClick:l[3]||(l[3]=e=>n(o).showIdentifiedItemsEditModal=!0)})]),t("div",he,g(n(S).length)+" アイテム表示中 ",1)]),i(G,{filters:n(w),"onUpdate:filters":l[4]||(l[4]=e=>W(w)?w.value=e:null),class:"p-datatable-sm",filterDisplay:"menu",showGridlines:"",sortMode:"multiple",value:n(S)},{default:m(()=>[i(I,{field:"name",sortable:"",header:"アイテム名",filterField:"name",showFilterMatchModes:!1,filterMenuStyle:{width:"18rem"}},{filter:m(({filterModel:e})=>[ve,i(L,{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s},null,8,["modelValue","onUpdate:modelValue"])]),filterclear:m(({filterCallback:e})=>[i(f,{label:"クリア",type:"button",icon:"pi pi-times",iconPos:"right",size:"small",class:"p-button-secondary",onClick:s=>e()},null,8,["onClick"])]),filterapply:m(({filterCallback:e})=>[i(f,{label:"適用",type:"button",icon:"pi pi-check",iconPos:"right",size:"small",class:"p-button-success",onClick:s=>e()},null,8,["onClick"])]),_:1}),i(I,{field:"category",sortable:"",header:"カテゴリ",filterField:"category",showFilterMatchModes:!1,filterMenuStyle:{width:"18rem"}},{filter:m(({filterModel:e})=>[be,i(T,{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,options:n(v).categories,optionLabel:"name",optionValue:"name",class:"p-column-filter",display:"chip"},null,8,["modelValue","onUpdate:modelValue","options"])]),filterclear:m(({filterCallback:e})=>[i(f,{label:"クリア",type:"button",icon:"pi pi-times",iconPos:"right",size:"small",class:"p-button-secondary",onClick:s=>e()},null,8,["onClick"])]),filterapply:m(({filterCallback:e})=>[i(f,{label:"適用",type:"button",icon:"pi pi-check",iconPos:"right",size:"small",class:"p-button-success",onClick:s=>e()},null,8,["onClick"])]),_:1}),i(I,{field:"buyPrice",sortable:"",header:"買値",filterField:"buyPrice",showFilterMatchModes:!1,filterMenuStyle:{width:"18rem"}},{filter:m(({filterModel:e})=>[ye,i(B,{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,min:0,max:99999,step:1},null,8,["modelValue","onUpdate:modelValue"])]),filterclear:m(({filterCallback:e})=>[i(f,{label:"クリア",type:"button",icon:"pi pi-times",iconPos:"right",size:"small",class:"p-button-secondary",onClick:s=>e()},null,8,["onClick"])]),filterapply:m(({filterCallback:e})=>[i(f,{label:"適用",type:"button",icon:"pi pi-check",iconPos:"right",size:"small",class:"p-button-success",onClick:s=>e()},null,8,["onClick"])]),_:1}),i(I,{field:"sellPrice",sortable:"",header:"売値",filterField:"sellPrice",showFilterMatchModes:!1,filterMenuStyle:{width:"18rem"}},{filter:m(({filterModel:e})=>[ge,i(B,{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,min:0,max:99999,step:1},null,8,["modelValue","onUpdate:modelValue"])]),filterclear:m(({filterCallback:e})=>[i(f,{label:"クリア",type:"button",icon:"pi pi-times",iconPos:"right",size:"small",class:"p-button-secondary",onClick:s=>e()},null,8,["onClick"])]),filterapply:m(({filterCallback:e})=>[i(f,{label:"適用",type:"button",icon:"pi pi-check",iconPos:"right",size:"small",class:"p-button-success",onClick:s=>e()},null,8,["onClick"])]),_:1}),i(I,{header:""},{body:m(e=>[i(f,{label:"識別済みに追加",type:"button",icon:"pi pi-plus",size:"small",onClick:s=>D(e.data)},null,8,["onClick"])]),_:1})]),_:1},8,["filters","value"])]),i(q,{visible:n(o).showIdentifiedItemsEditModal,"onUpdate:visible":l[13]||(l[13]=e=>n(o).showIdentifiedItemsEditModal=e),header:"識別済み除外設定",breakpoints:{"960px":"75vw"},style:{width:"30vw"},modal:!0},{footer:m(()=>[t("div",st,[i(f,{label:"閉じる",icon:"pi pi-times",size:"small",style:{margin:"0 0.2em"},onClick:l[12]||(l[12]=e=>n(o).showIdentifiedItemsEditModal=!1)})])]),default:m(()=>[Ve,i(Q),ke,t("div",Ie,[(a(!0),u(p,null,_(n(x),(e,s)=>(a(),u("div",Ce,[t("div",we,[(a(!0),u(p,null,_(e,(d,r)=>(a(),u("div",null,[i(k,{modelValue:n(o).identifiedItems,"onUpdate:modelValue":l[5]||(l[5]=h=>n(o).identifiedItems=h),"input-id":"bangle"+s+r,value:d.name},null,8,["modelValue","input-id","value"]),t("label",{for:"bangle"+s+r,class:"ml-2"},g(d.name),9,xe)]))),256))])]))),256))]),Pe,t("div",$e,[(a(!0),u(p,null,_(n(P),(e,s)=>(a(),u("div",Me,[t("div",Ue,[(a(!0),u(p,null,_(e,(d,r)=>(a(),u("div",null,[i(k,{modelValue:n(o).identifiedItems,"onUpdate:modelValue":l[6]||(l[6]=h=>n(o).identifiedItems=h),"input-id":"food"+s+r,value:d.name},null,8,["modelValue","input-id","value"]),t("label",{for:"food"+s+r,class:"ml-2"},g(d.name),9,je)]))),256))])]))),256))]),Fe,t("div",Se,[(a(!0),u(p,null,_(n($),(e,s)=>(a(),u("div",ze,[t("div",Be,[(a(!0),u(p,null,_(e,(d,r)=>(a(),u("div",null,[i(k,{modelValue:n(o).identifiedItems,"onUpdate:modelValue":l[7]||(l[7]=h=>n(o).identifiedItems=h),"input-id":"grass"+s+r,value:d.name},null,8,["modelValue","input-id","value"]),t("label",{for:"grass"+s+r,class:"ml-2"},g(d.name),9,Ee)]))),256))])]))),256))]),Ne,t("div",Ae,[(a(!0),u(p,null,_(n(M),(e,s)=>(a(),u("div",De,[t("div",Le,[(a(!0),u(p,null,_(e,(d,r)=>(a(),u("div",null,[i(k,{modelValue:n(o).identifiedItems,"onUpdate:modelValue":l[8]||(l[8]=h=>n(o).identifiedItems=h),"input-id":"scroll"+s+r,value:d.name},null,8,["modelValue","input-id","value"]),t("label",{for:"scroll"+s+r,class:"ml-2"},g(d.name),9,Te)]))),256))])]))),256))]),Ge,t("div",Qe,[(a(!0),u(p,null,_(n(U),(e,s)=>(a(),u("div",qe,[t("div",Oe,[(a(!0),u(p,null,_(e,(d,r)=>(a(),u("div",null,[i(k,{modelValue:n(o).identifiedItems,"onUpdate:modelValue":l[9]||(l[9]=h=>n(o).identifiedItems=h),"input-id":"stick"+s+r,value:d.name},null,8,["modelValue","input-id","value"]),t("label",{for:"stick"+s+r,class:"ml-2"},g(d.name),9,Re)]))),256))])]))),256))]),He,t("div",Je,[(a(!0),u(p,null,_(n(j),(e,s)=>(a(),u("div",Ke,[t("div",We,[(a(!0),u(p,null,_(e,(d,r)=>(a(),u("div",null,[i(k,{modelValue:n(o).identifiedItems,"onUpdate:modelValue":l[10]||(l[10]=h=>n(o).identifiedItems=h),"input-id":"incense"+s+r,value:d.name},null,8,["modelValue","input-id","value"]),t("label",{for:"incense"+s+r,class:"ml-2"},g(d.name),9,Xe)]))),256))])]))),256))]),Ye,t("div",Ze,[(a(!0),u(p,null,_(n(F),(e,s)=>(a(),u("div",et,[t("div",tt,[(a(!0),u(p,null,_(e,(d,r)=>(a(),u("div",null,[i(k,{modelValue:n(o).identifiedItems,"onUpdate:modelValue":l[11]||(l[11]=h=>n(o).identifiedItems=h),"input-id":"pot"+s+r,value:d.name},null,8,["modelValue","input-id","value"]),t("label",{for:"pot"+s+r,class:"ml-2"},g(d.name),9,lt)]))),256))])]))),256))])]),_:1},8,["visible"])],64)}}});export{Mt as default};
